<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>bython</title>
	<script src="./js/brython.js"></script>
	<script src="./js/brython_stdlib.js"></script>
	<link rel="stylesheet" href="./css/bootstrap.css">
</head>
<body onload="brython()">
	<div class="container">
		<h1>Brython crash course</h1>
		<h1 id="hello"></h1>
		<button id="btn-alert" class="btn btn-success">Alert & Insert</button>
		<input type="text" class="form-control mt-4" id="text" placeholder="Enter something">
		<span id="output"></span>

		<h2 id="greet">Hello {name}</h2>

		<button class="btn btn-primary" id="joken-btn">Get Joke</button>
		<div class="card mt-4" id="joke">Click "get joke" Button </div>

		<input type="file" class="mt-4" id="file-upload">
		<br>
		<textarea  id="file-text" cols="60" rows="10" class="mt-2"></textarea>
		



		<script type="text/python" id="script0">
			from browser import document, console, alert 
			def show(e):
				console.log(e)
				alert('Hello world ')
				document['hello'] <= 'hello world'
			document['btn-alert'].bind('click',show)
		</script>

		<!--Binding Text-->

		<script type="text/python" id="script1">
			from browser import document
			def show_text(e):
				document['ouput'].textContent = e.target.value
			document['text'].bind('input',show_text)
		</script>

		<!-- template and variable-->
		<script type="text/python" id="script1">
			from browser import document
			from browser.template import Template 
			Template(document['greet']).render(name="Grace")
		</script>

		<!--Ajax call -->		

		<script type="text/python" id="script1">
			from browser import document, ajax
			url = 'https://api.chucknorris.io/jokes/random'

			def on_complete(req):
				import json
				data = json.loads(req.responseText)
				joke = data['value']
				document['joke'].text = joke
			
			def get_joke(e)
				req = ajax.ajax()
				req.open('GET', url, True)
				req.bind('complete', on_complete)
				document['joke'].text = 'Loading ...'
				req.send()
			document['joken-btn'].bind('click',get_joke)	
		</script>

		<!--upload file -->

		<script type="text/python" id="script1">
			from browser import document,window

			def file_read(e):
				def onload(e):
					document['file-text'].value = e.target.result 
				
				file = document['file-upload'].files[0]
				reader = window.FileReader.new()
				reader.readAsText(file)
				reader.bind('load',onload)
			document['file-upload'].bind('input', file_read)
		</script>
	</div>
</body>
</html>